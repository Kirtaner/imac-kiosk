<template name="customerList">

<div class="container" id="customerList">

    <div class="row">
        <div class="col-sm-12"  style="background: #fff; margin-top: 10px; padding-top: 20px; border-radius: 4px; color: #222;">
            <h2>Customer Profile Queue</h2>

            <div class="row">
                {{#each customers}}
                    <div class="col-sm-3">
                        <div class="well">
                            <h3>{{firstName}} {{lastName}}</h3>
                            {{ emailAddress }}<br>
                            {{ companyName }}<br>
                            {{ postalCode }}<br>
                            <input style="display: none" type="tel" class="{{ phoneNumber }} phone form-control" value="{{ phoneNumber }}" readonly>
                            {{ phoneNumber }}<br>
                            <br>

                            <button class="addCustomer btn btn-primary"
                                    data-first="{{ firstName }}"
                                    data-last="{{ lastName }}"
                                    data-email="{{ emailAddress }}"
                                    data-company="{{ companyName }}"
                                    data-address="{{ address }}"
                                    data-city="{{ city }}"
                                    data-province="{{ province }}"
                                    data-postal="{{ postalCode }}"
                                    data-country="{{ country }}"
                                    data-phone="{{ phoneNumber }}">Add to RMS</button>

                            {{# quickRemoveButton collection=Collections.Customers _id=this._id class="btn btn-sm btn-danger"}}
                                Clear
                            {{/ quickRemoveButton}}

                        </div>
                    </div>
                {{/each}}
            </div>
        </div>
    </div>

    <input style="opacity: 0" id="temp" type="text" value="">

</div>


<script type="text/javascript">
    Notification.requestPermission();

    $(document.body).on('click', 'button.addCustomer', function(){

        var phone = $(this).data('phone').toString();
        var formattedPhone = phone.substr(0,3) + ' ' + phone.substr(3,3) + ' ' + phone.substr(6,4);

        $("#temp").val(formattedPhone).select();
        success = document.execCommand("copy");

        document.getSelection().removeAllRanges();

        $.ajax({
            method: "POST",
            url: "http://192.168.1.98:8000/customer/add",
            data: $(this).data()
        }).done(function(data){
            alert('Customer profile added to RMS');
        });
    });
</script>

</template>